<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>

<!DOCTYPE html>

<html lang="ko">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1" /> 

<title>영화관 홈페이지</title>

<!-- Bootstrap CSS -->

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">

<style>

/* --------------------------

   전체 페이지 기본 스타일

--------------------------- */
body {
	background-color: #000;
	color: #eee;
	font-family: 'Noto Sans KR', sans-serif;
	margin: 0;
}

.container {
    min-height: 100vh; /* 최소 화면 높이 */
    padding: 40px 20px 80px; /* 아래 여유 공간 확보 */

}

section {
	margin: 40px 0 28px;
}

.sec-head {
	display: flex;
	align-items: baseline;
	justify-content: space-between;
	margin-bottom: 14px;
}

.sec-title {
	font-size: 22px;
	font-weight: 800;
	color: #eee;
}

/* --------------------------

   영화 카드 그리드

--------------------------- */
.grid {
	display: grid;
	grid-template-columns: repeat(5, 1fr);
	gap: 18px;
}

@media ( max-width : 1100px) {
	.grid {
		grid-template-columns: repeat(4, 1fr);
	}
}

@media ( max-width : 900px) {
	.grid {
		grid-template-columns: repeat(3, 1fr);
	}
}

@media ( max-width : 640px) {
	.grid {
		grid-template-columns: repeat(2, 1fr);
	}
}

/* --------------------------

   카드 스타일

--------------------------- */
.card {
	background: #151822;
	border-radius: 12px;
	overflow: hidden;
	position: relative;
	cursor: pointer;
	font-weight: 700;
	width: 200px;
	height: 300px;
	transition: 0.3s;
}

.poster {
	position: relative;
	aspect-ratio: 2/3;
	background: #0c0f15;
}

.poster img {
	width: 100%;
	height: 100%;
	object-fit: cover;
	display: block;
}

/* 카드 후버 오버레이 */
.overlay {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-color: rgba(128, 128, 128, 0.5);
	opacity: 0;
	transition: opacity 0.3s ease;
	z-index: 1;
}

.card:hover .overlay {
	opacity: 1;
}

/* 순위 뱃지 */
.rank-badge {
	position: absolute;
	left: 8px;
	top: 8px;
	background: gold;
	color: #111;
	border-radius: 8px;
	padding: 6px 10px;
	font-weight: 900;
	font-size: 14px;
}

/* 좋아요 버튼 */
.like-btn {
	position: absolute;
	right: 8px;
	top: 8px;
	background: rgba(0, 0, 0, .45);
	width: 36px;
	height: 36px;
	border-radius: 10px;
	display: grid;
	place-items: center;
	cursor: pointer;
	color: #fff;
}

/* 카드 후버 버튼 */
.card-foot {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	z-index: 2;
	display: flex;
	flex-direction: column;
	gap: 8px;
	opacity: 0;
	transition: opacity 0.3s ease;
}

.card:hover .card-foot {
	opacity: 1;
}

.btn.brand {      /* 카드 예매버튼 */ 
	padding: 8px 14px;
	border-radius: 8px;
	background: #ff2f6e;
	color: #fff;
	text-decoration: none;
	text-align: center;
	font-weight: 700;
	transition: opacity 0.3s ease;
}

.btn.detail { /* 카드 상세정보 버튼 */
	padding: 8px 14px;
	border-radius: 8px;
	background: #ff2f6e;
	color: #fff;
	text-decoration: none;
	text-align: center;
	font-weight: 700;
	transition: opacity 0.3s ease;
}

/* 카드에 커서 올린 상태: 두 버튼은 기본 투명 아웃라인 */
.card:hover .card-foot .btn.brand,
.card:hover .card-foot .btn.detail {
	 background: transparent;
	 color: #ff2f6e;
	 border-color: #ff2f6e;
}

/* 버튼 자체에 커서 올리면: 그 버튼만 핑크로 강조 */
.card:hover .card-foot .btn.brand:hover,
.card:hover .card-foot .btn.detail:hover,
.card:hover .card-foot .btn.brand:focus-visible,
.card:hover .card-foot .btn.detail:focus-visible {
	background: #ff2f6e;
	color: #fff;
	border-color: #ff2f6e;
}

/* --------------------------

   카드 아래 영화 정보

--------------------------- */
.movie-wrapper {
	display: flex;
	flex-direction: column;
	gap: 6px;
	width: 200px;
}

.movie-info {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 8px;
	font-size: 14px;
	color: #eee;
	padding: 0 4px;
	box-sizing: border-box;
}

.movie-title {
	font-weight: 700;
	flex: 1;
	min-width: 0;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.movie-time {
	font-weight: 500;
	flex: 0 0 auto;
	white-space: nowrap;
}

/* --------------------------

   캐러셀 스타일

--------------------------- */
.carousel-item img {
	max-height: 400px;
	object-fit: cover;
}
</style>

</head>

<body>

	<!-- 공통 헤더 include -->

	<jsp:include page="/header.jsp" />



	<main class="container">

		<!-- --------------------------

     Bootstrap 캐러셀

--------------------------- -->

		<div id="movieCarousel" class="carousel slide" data-bs-ride="carousel">

			<div class="carousel-inner">

				<div class="carousel-item active">

					<img
						src="https://images.unsplash.com/photo-1524985069026-dd778a71c7b4?q=80&w=1600&auto=format&fit=crop"
						class="d-block w-100" alt="슬라이드1">

					<div class="carousel-caption d-none d-md-block">

						<h5>청춘은 누군가를 좋아하면서 시작된다</h5>

						<p>8월 27일 대개봉 · 전체관람가</p>

					</div>

				</div>

				<div class="carousel-item">

					<img
						src="https://images.unsplash.com/photo-1517602302552-471fe67acf66?q=80&w=1600&auto=format&fit=crop"
						class="d-block w-100" alt="슬라이드2">

				</div>

				<div class="carousel-item">

					<img src="images/popcorn.jpeg" class="d-block w-100" alt="슬라이드3">

				</div>

			</div>

			<button class="carousel-control-prev" type="button"
				data-bs-target="#movieCarousel" data-bs-slide="prev">

				<span class="carousel-control-prev-icon" aria-hidden="true"></span>

				<span class="visually-hidden">Previous</span>

			</button>

			<button class="carousel-control-next" type="button"
				data-bs-target="#movieCarousel" data-bs-slide="next">

				<span class="carousel-control-next-icon" aria-hidden="true"></span>

				<span class="visually-hidden">Next</span>

			</button>

		</div>



		<!-- --------------------------

     인기 상영작 TOP 10

--------------------------- -->

		<section>

			<div class="sec-head">

				<div class="sec-title">
					인기 상영작 <span style="color: #ff2f6e">TOP 10</span>
				</div>

			</div>



			<!-- 영화 카드 그리드 -->

			<div class="grid" id="movieGrid">
				
				<!-- JSTL forEach를 사용하여 영화 목록을 반복 출력 -->
				<c:forEach var="movie" items="${movieTop10List}" varStatus="status" begin="0" end="9">
					<div class="movie-wrapper">

						<article class="card">

							<div class="poster">

								<img src="${movie.poster}" alt="${movie.movieTitle}">

								<div class="rank-badge">${status.count}</div>

								<div class="like-btn" title="좋아요">♡</div>

								<div class="overlay"></div>

							</div>

							<div class="card-foot">
								
								<a class="btn brand" href="movieList.do?movieId=${movie.movieId}">예매하기</a> 
								<a class="btn detail" href="movieDetail.do?movieId=${movie.movieId}">상세정보</a>

							</div>

						</article>

						<div class="movie-info">

							<span class="movie-title">${movie.movieTitle}</span> 
							<span class="movie-time">⏱ ${movie.movieTime}분</span>

						</div>

					</div>
				</c:forEach>

			</div>
			<!-- /grid -->

		</section>

	</main>



	<!-- Bootstrap JS -->

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>